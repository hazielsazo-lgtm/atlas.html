<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>ATLAS - Albion Online</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="ATLAS - Mapas y gremios compartidos (Firestore)" />

  <!-- Favicon: brújula embebida -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect rx='14' width='100' height='100' fill='%23362f22'/%3E%3Ccircle cx='50' cy='45' r='28' fill='%23f6e5b3' stroke='%23704d1b' stroke-width='3'/%3E%3Cpath d='M50 22 L58 54 L50 50 L42 54 Z' fill='%23312b22' transform='rotate(18 50 45)'/%3E%3Ccircle cx='50' cy='45' r='6' fill='%231b1208'/%3E%3C/svg%3E" type="image/svg+xml">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Spectral:wght@300;400;600;700&display=swap');
    :root{
      --bg:#070707; --panel:#0e0f12; --card:#121317;
      --accent:#caa42b; --muted: rgba(255,255,255,0.68);
      --danger:#e74c3c; --success:#2bb673;
    }
    html,body{
      height:100%; margin:0; padding:0;
      background:linear-gradient(180deg,#030303,var(--bg));
      color:#efe8d8; font-family:"Spectral",serif;
    }
    .wrap{
      min-height:100vh; display:flex; align-items:flex-start;
      justify-content:center; padding:28px; box-sizing:border-box;
    }
    .app{
      width:100%; max-width:1100px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px; padding:18px;
      box-shadow:0 10px 40px rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.02);
    }
    header{
      display:flex; align-items:center; gap:14px;
      justify-content:space-between; flex-wrap:wrap;
    }
    .brand{display:flex; align-items:center; gap:12px;}
    .logo{
      width:56px; height:56px; border-radius:12px;
      background:#2f2418; display:flex; align-items:center;
      justify-content:center; box-shadow:0 6px 16px rgba(0,0,0,0.6);
    }
    .logo svg{width:44px; height:44px;}
    h1{
      margin:0; font-size:20px; letter-spacing:1px;
      background:linear-gradient(90deg,var(--accent),#f0d38a);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    .sub{font-size:12px; color:var(--muted); margin-top:2px;}
    .controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
    .btn{
      background:linear-gradient(90deg,#b88f20,#d4b03a);
      border:none; padding:10px 12px; border-radius:8px;
      color:#111; font-weight:700; cursor:pointer;
      box-shadow:0 6px 16px rgba(0,0,0,0.35);
    }
    .btn.ghost{
      background:transparent; border:1px solid rgba(255,255,255,0.04);
      color:var(--muted); font-weight:600;
    }
    .btn.danger{background:linear-gradient(90deg,#d64b3a,#b83a2a); color:#fff;}
    .small{padding:8px 10px; font-size:13px;}
    main{
      display:grid; grid-template-columns:1fr 380px;
      gap:18px; margin-top:18px;
    }
    @media(max-width:980px){ main{grid-template-columns:1fr;} }
    .panel{
      background:linear-gradient(180deg,var(--card), rgba(255,255,255,0.01));
      padding:14px; border-radius:10px;
      border:1px solid rgba(255,255,255,0.02);
    }
    .searchRow{
      display:flex; gap:8px; align-items:center; margin-bottom:12px;
    }
    .searchRow input{
      flex:1; padding:12px; border-radius:8px;
      border:1px solid rgba(255,255,255,0.03);
      background:transparent; color:inherit; font-size:14px;
    }
    .list{
      display:grid; gap:12px; max-height:70vh;
      overflow:auto; padding-right:6px;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      padding:12px; border-radius:8px;
      border:1px solid rgba(255,255,255,0.02);
      display:flex; flex-direction:column; gap:8px;
    }
    .card h3{margin:0; font-size:16px;}
    .meta{font-size:12px; color:var(--muted);}
    .guilds{display:flex; flex-wrap:wrap; gap:8px; margin-top:6px;}
    .chip{
      padding:6px 8px; border-radius:999px; font-weight:600;
      font-size:13px; background:rgba(0,0,0,0.25);
      border:1px solid rgba(255,255,255,0.02);
    }
    .cardActions{display:flex; gap:8px; margin-top:8px; flex-wrap:wrap;}
    .muted{font-size:13px; color:var(--muted);}
    label{display:block; font-size:13px; margin-bottom:6px; color:var(--muted);}
    .modal-back{
      position:fixed; inset:0; background:rgba(0,0,0,0.6);
      display:none; align-items:center; justify-content:center; z-index:50;
    }
    .modal{
      background:var(--panel); padding:16px; border-radius:10px;
      max-width:720px; width:94%;
      box-shadow:0 10px 40px rgba(0,0,0,0.7);
      border:1px solid rgba(255,255,255,0.03);
    }
    footer{text-align:center; margin-top:12px; font-size:12px; color:var(--muted);}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="app">

      <header>
        <div class="brand">
          <div class="logo">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
              <rect x="6" y="6" width="88" height="88" rx="12" fill="#2f2418"/>
              <circle cx="50" cy="45" r="26" fill="#f6e5b3" stroke="#704d1b" stroke-width="3"/>
              <path d="M50 22 L58 54 L50 50 L42 54 Z" fill="#312b22" transform="rotate(18 50 45)"/>
              <circle cx="50" cy="45" r="5" fill="#1b1208"/>
            </svg>
          </div>
          <div>
            <h1>ATLAS - Albion Online</h1>
            <div class="sub">Mapas & gremios — lectura pública · edición protegida</div>
          </div>
        </div>

        <div class="controls">
          <button id="btnExport" class="btn ghost small">Exportar JSON</button>
          <button id="btnImport" class="btn ghost small">Importar JSON</button>
          <input id="fileInput" type="file" accept=".json" style="display:none">
          <button id="btnAuth" class="btn small">Admin (clave)</button>
        </div>
      </header>

      <main>
        <section>
          <div class="panel">
            <div class="searchRow">
              <input id="searchInput" placeholder="Buscar mapa o gremio...">
            </div>

            <div class="list panel" id="mapsList" aria-live="polite"></div>
          </div>
...
